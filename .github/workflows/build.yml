name: Build

on:
  repository_dispatch:
    types: [build-trigger]

jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
      - name: Get tag version
        id: get_version
        run: |
          GITHUB_REF=${{ github.event.client_payload.ref }}
          echo ::set-output name=VERSION::${GITHUB_REF/refs\/tags\/v/}
      - name: Checkout
        uses: actions/checkout@v2
        with:
          persist-credentials: false
          ref: ${{ github.event.client_payload.ref }}
      - name: Create tar.gz
        run: |
          echo ${{ steps.get_version.outputs.VERSION }}
